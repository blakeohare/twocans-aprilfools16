import GFX;

class ImageLibrary {
	static field images = {};
	static field imagesFlipped = {};
	
	constructor() { assert(false); }
	
	static function get(path, flipped = false) {
		lookup = flipped ? ImageLibrary.images : ImageLibrary.imagesFlipped;
		img = lookup.get(path);
		if (img == null) {
			if (flipped) {
				img = ImageLibrary.get(path);
				img = img.flip(true, false);
			} else {
				rpath = 'images/' + path;
				if (!rpath.endsWith('.png')) {
					rpath += '.png';
				}
				img = ImageLoader.fromResource(rpath).getImage();
				if (rpath.startsWith('images/characters/')) {
					img = img.scale(img.width * 2, img.height * 2);
				}
			}
			lookup[path] = img;
		}
		return img;
	}
}
